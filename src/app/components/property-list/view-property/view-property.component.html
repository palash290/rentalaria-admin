<div class="ct_inner_header_bg mt-4 ct_px_30 ">
    <div class="container-fluid my-4 property-details">

        <!-- Back -->
        <a routerLink="/home/property-list"
            class="text-decoration-none text-dark mb-3 d-inline-block ct_fw_500 ct_fs_26">
            <i class="fa-solid fa-chevron-left me-2"></i> Property Details
        </a>

        <!-- Top Section -->
        <div class="row g-3">
            <!-- Images -->
            <!-- <div class="col-xl-7 col-12">
                <div class="row g-2">
                    <div class="col-6 property-imgs property-detail-img-first d-sm-block d-none">
                        <img src="img/property-det1.jpg" class="img-fluid rounded">
                    </div>
                    <div class="col-sm-3 col-6 d-flex flex-column gap-2 property-img property-detail-side-img">
                        <img src="img/property-det2.jpg" class="img-fluid rounded">
                        <img src="img/property-det3.jpg" class="img-fluid rounded">
                    </div>
                    <div class="col-sm-3 col-6 d-flex flex-column gap-2 property-imgs property-detail-side-img">
                        <img src="img/property-det4.jpg" class="img-fluid rounded">
                        <div class="position-relative property-detail-side-img">
                            <img src="img/property-det5.jpg" class="img-fluid rounded">

                            <div class="see-all-overlay" data-bs-toggle="modal" data-bs-target="#imageSliderModal">
                                <span>See All</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
            <div class="col-xl-7 col-12">
                <div class="position-relative">
                    <div class="row g-2">

                        <!-- BIG IMAGE (index 0) -->
                        @if (mediaList.length > 0) {
                        <div class="col-6 property-imgs property-detail-img-first d-sm-block d-none">
                            @if (!isVideo(mediaList[0].file)) {
                            <img [src]="mediaList[0].file" class="img-fluid rounded">
                            } @else {
                            <video class="img-fluid rounded" muted>
                                <source [src]="mediaList[0].file" type="video/mp4">
                            </video>
                            }
                        </div>
                        }

                        <!-- MIDDLE COLUMN (index 1,2) -->
                        <div class="col-sm-3 col-6 d-flex flex-column gap-2 property-img property-detail-side-img">
                            @for (item of mediaList.slice(1, 3); track $index) {

                            @if (!isVideo(item.file)) {
                            <img [src]="item.file" class="img-fluid rounded">
                            } @else {
                            <video class="img-fluid rounded" muted>
                                <source [src]="item.file" type="video/mp4">
                            </video>
                            }

                            }
                        </div>


                        <!-- RIGHT COLUMN (index 3,4) -->
                        <div class="col-sm-3 col-6 d-flex flex-column gap-2 property-imgs property-detail-side-img">
                            @for (item of mediaList.slice(3, 5); track $index) {

                            <div class="position-relative">
                                @if (!isVideo(item.file)) {
                                <img [src]="item.file" class="img-fluid rounded">
                                } @else {
                                <video class="img-fluid rounded" muted>
                                    <source [src]="item.file" type="video/mp4">
                                </video>
                                }

                                <!-- SEE ALL only on last visible item -->
                                <!-- @if ($index === mediaList.slice(3, 5).length - 1) { -->
                                <!-- <div class="see-all-overlay" data-bs-toggle="modal" data-bs-target="#imageSliderModal">
                                    <span>See All</span>
                                </div> -->
                                <!-- } -->
                            </div>

                            }
                        </div>


                    </div>
                </div>
            </div>

            <!-- Info -->
            <div class="col-xl-5 col-12">
                <div class="detail-content">
                    <h4 class="mb-3">{{propertyDetails?.property_name}}</h4>
                    <p class="text-muted">
                       <svg width="21" height="15" viewBox="0 0 21 15" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.1875 3.09375H8.25V8.2766H7.29807V6.51488C7.29697 5.51672 6.89997 4.55977 6.19417 3.85396C5.48838 3.14815 4.53143 2.75113 3.53328 2.75H1.375V0H0V14.7812H1.375V12.7298L19.25 12.8728V14.7812H20.625V6.53125C20.624 5.61988 20.2615 4.74614 19.6171 4.1017C18.9726 3.45727 18.0989 3.09477 17.1875 3.09375ZM1.375 4.125H3.53328C4.16687 4.12572 4.77431 4.37773 5.22232 4.82575C5.67034 5.27376 5.92235 5.8812 5.92307 6.51479V8.27651H1.375V4.125ZM19.25 11.4978L1.375 11.3548V9.6516H19.25V11.4978ZM19.25 8.2766H9.625V4.46875H17.1875C17.7343 4.46938 18.2586 4.68687 18.6452 5.07353C19.0319 5.46019 19.2494 5.98443 19.25 6.53125V8.2766Z" fill="#222222"/>
</svg>


                        {{propertyDetails?.address}}
                    </p>

                    <p class="text-muted">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M19 6H5C3.89543 6 3 6.89543 3 8V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V8C21 6.89543 20.1046 6 19 6Z"
                                stroke="#0D0D0D" stroke-width="1.3" />
                            <path d="M3 11H21M9 16H15M8 3V7M16 3V7" stroke="#0D0D0D" stroke-width="1.3"
                                stroke-linecap="round" />
                        </svg>

                        Available From {{propertyDetails?.available_from | date:'dd-MMM-yyyy'}}
                    </p>

                    <div class="d-flex gap-3 text-muted mb-4 flex-wrap">
                        <span><svg width="21" height="15" viewBox="0 0 21 15" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.1875 3.09375H8.25V8.2766H7.29807V6.51488C7.29697 5.51672 6.89997 4.55977 6.19417 3.85396C5.48838 3.14815 4.53143 2.75113 3.53328 2.75H1.375V0H0V14.7812H1.375V12.7298L19.25 12.8728V14.7812H20.625V6.53125C20.624 5.61988 20.2615 4.74614 19.6171 4.1017C18.9726 3.45727 18.0989 3.09477 17.1875 3.09375ZM1.375 4.125H3.53328C4.16687 4.12572 4.77431 4.37773 5.22232 4.82575C5.67034 5.27376 5.92235 5.8812 5.92307 6.51479V8.27651H1.375V4.125ZM19.25 11.4978L1.375 11.3548V9.6516H19.25V11.4978ZM19.25 8.2766H9.625V4.46875H17.1875C17.7343 4.46938 18.2586 4.68687 18.6452 5.07353C19.0319 5.46019 19.2494 5.98443 19.25 6.53125V8.2766Z" fill="#222222"/>
</svg>

                            {{propertyDetails?.total_bedrooms}} Bed</span>
                        <span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M3 5V19C3 20.103 3.897 21 5 21H19C20.103 21 21 20.103 21 19V5C21 3.897 20.103 3 19 3H5C3.897 3 3 3.897 3 5ZM19.002 19H5V5H19L19.002 19Z"
                                    fill="#0D0D0D" />
                                <path
                                    d="M14.999 12H16.999V7H11.999V9H14.999V12ZM11.999 15H8.99902V12H6.99902V17H11.999V15Z"
                                    fill="#0D0D0D" />
                            </svg>

                            {{propertyDetails?.square_footage}} sq. ft</span>
                        <span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M12.002 20.4961C12.652 20.4961 13.366 20.4791 14.1 20.4521C14.358 20.4421 14.486 20.4371 14.707 20.4151C17.985 20.0831 20.779 17.1811 20.987 13.8941C21.002 13.6721 21.002 13.4741 21.002 13.0791C21.002 13.0021 21.002 12.9631 21 12.9311C20.9842 12.6888 20.8808 12.4606 20.7092 12.2889C20.5375 12.1172 20.3092 12.0138 20.067 11.9981C20.034 11.9961 19.997 11.9961 19.919 11.9961M4.08495 11.9961C4.00795 11.9961 3.96995 11.9961 3.93695 11.9981C3.69468 12.0138 3.46641 12.1172 3.29474 12.2889C3.12306 12.4606 3.01971 12.6888 3.00395 12.9311C3.00195 12.9631 3.00195 13.0011 3.00195 13.0791C3.00195 13.4741 3.00195 13.6721 3.01595 13.8941C3.19595 16.7381 5.31195 19.2941 8.00195 20.1461M6.00195 19.9961L5.00195 21.9961M18.002 19.9961L19.002 21.9961M2.00195 11.9961H14.002M22.002 11.9961H18.002"
                                    stroke="#0D0D0D" stroke-width="1.5" stroke-linecap="round" />
                                <path
                                    d="M2.25 12.9961C2.25 13.195 2.32902 13.3858 2.46967 13.5264C2.61032 13.6671 2.80109 13.7461 3 13.7461C3.19891 13.7461 3.38968 13.6671 3.53033 13.5264C3.67098 13.3858 3.75 13.195 3.75 12.9961H2.25ZM6.346 8.73809L5.648 9.01309C5.68492 9.10643 5.7402 9.19141 5.81057 9.263C5.88094 9.33458 5.96496 9.39131 6.05765 9.42982C6.15035 9.46833 6.24983 9.48785 6.3502 9.48721C6.45058 9.48657 6.5498 9.46579 6.642 9.42609L6.346 8.73809ZM12.306 6.17109L12.603 6.86109C12.782 6.784 12.9239 6.64026 12.9988 6.46033C13.0736 6.28039 13.0755 6.07839 13.004 5.89709L12.306 6.17109ZM3.75 12.9961V4.38109H2.25V12.9961H3.75ZM5.385 2.74609C6.054 2.74609 6.655 3.15309 6.903 3.77409L8.296 3.21609C8.0634 2.63441 7.66187 2.13676 7.14318 1.78545C6.6245 1.43413 6.01246 1.24627 5.386 1.24609L5.385 2.74609ZM3.75 4.38109C3.75 3.47809 4.482 2.74609 5.385 2.74609L5.386 1.24609C4.55455 1.24609 3.75615 1.57639 3.16822 2.16431C2.58029 2.75224 2.25 3.54964 2.25 4.38109H3.75ZM6.903 3.77409L7.283 4.72209L8.675 4.16509L8.296 3.21609L6.903 3.77409ZM7.043 8.46309C6.79155 7.82196 6.79656 7.10863 7.057 6.47109L5.667 5.90609C5.26137 6.90072 5.25521 8.01333 5.648 9.01309L7.043 8.46309ZM12.01 5.48309L6.049 8.04909L6.642 9.42609L12.602 6.86009L12.01 5.48309ZM10.282 5.06409C10.904 5.33009 11.367 5.83309 11.609 6.44609L13.004 5.89709C12.8134 5.40524 12.5267 4.9553 12.1606 4.57551C11.7946 4.19571 11.3565 3.89267 10.872 3.68409L10.282 5.06409ZM7.057 6.47109C7.29197 5.88076 7.73729 5.39939 8.307 5.11809L7.651 3.77009C6.74861 4.21269 6.0419 4.97354 5.667 5.90609L7.057 6.47109ZM8.307 5.11809C8.61282 4.96707 8.94773 4.88412 9.28869 4.87497C9.62964 4.86582 9.96852 4.92969 10.282 5.06409L10.872 3.68409C10.3607 3.46539 9.80814 3.36076 9.25221 3.37543C8.69627 3.3901 8.15007 3.52473 7.651 3.77009L8.307 5.11809Z"
                                    fill="#0D0D0D" />
                            </svg>

                            {{propertyDetails?.total_bathrooms}} Bath</span>
                        <span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M2.00098 9.99954L11.109 2.80954C11.3631 2.60905 11.6773 2.5 12.001 2.5C12.3246 2.5 12.6389 2.60905 12.893 2.80954L16.501 5.65754V3.99954C16.501 3.73433 16.6063 3.47997 16.7939 3.29244C16.9814 3.1049 17.2358 2.99954 17.501 2.99954H18.501C18.7662 2.99954 19.0205 3.1049 19.2081 3.29244C19.3956 3.47997 19.501 3.73433 19.501 3.99954V8.02554L22.001 9.99954M20.001 11.4995V15.4995C20.001 18.3275 20.001 19.7425 19.122 20.6205C18.244 21.4995 16.829 21.4995 14.001 21.4995H10.001C7.17298 21.4995 5.75798 21.4995 4.87998 20.6205C4.00098 19.7425 4.00098 18.3275 4.00098 15.4995V11.4995"
                                    stroke="#0D0D0D" stroke-width="1.26316" stroke-linecap="round"
                                    stroke-linejoin="round" />
                                <path
                                    d="M15.0029 15.5039C14.2029 16.1259 13.1529 16.5039 12.0029 16.5039C10.8529 16.5039 9.80293 16.1259 9.00293 15.5039"
                                    stroke="#0D0D0D" stroke-width="1.26316" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>

                            {{propertyDetails?.property_type}}</span>
                    </div>

                    <h6 class="mb-3">Pricing Details</h6>
                    <p class="mb-3">Monthly Rent <span
                            class="float-end fw-bold">€{{propertyDetails?.monthly_rent}}</span></p>
                    <p>Security Deposit <span class="float-end fw-bold">€{{propertyDetails?.security_deposit}}</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- About -->
        <div class="card mt-4 card-contents">
            <div class="card-body p-4">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <div>
                        <h6 class="mb-0">About</h6>
                    </div>
                    <div class="see-all-overlay" data-bs-toggle="modal" data-bs-target="#imageSliderModal">
                        <span>See All Media</span>
                    </div>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <p class=" mb-0 ct_custom_scroll property-content-scroll"
                            [innerHTML]="propertyDetails?.property_description">
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Amenities -->
        <div class="card mt-3 card-contents">
            <div class="card-body  p-4">
                <h6 class="mb-3">Amenities</h6>
                <div class="d-sm-flex gap-5 ct_custom_scroll property-content-scroll">
                    <ul class="amenities-list">
                        <li *ngFor="let item of propertyDetails?.amenities">
                            {{item.name}}
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- House Rules -->
        <div class="card mt-3 card-contents">
            <div class="card-body p-4">
                <h6>House Rules</h6>
                <ul class="mb-0 house-rule-list ct_custom_scroll property-content-scroll">
                    <li *ngFor="let rule of houseRules">
                        {{ rule }}
                    </li>
                </ul>
            </div>
        </div>

        <!-- Getting Around -->
        <div class="card mt-3 card-contents">
            <div class="card-body p-4">
                <h6>Getting Around</h6>
                <div class="d-sm-flex gap-5  ct_custom_scroll property-content-scroll">
                    <ul class="mb-0 house-rule-list ct_custom_scroll property-content-scroll">
                        <li *ngFor="let rule of nearbyLocation">
                            {{ rule }}
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="imageSliderModal" tabindex="-1">
    <div class="modal-dialog modal-md modal-dialog-centered">
        <div class="modal-content border-0 rounded-4">

            <!-- Header -->
            <div class="modal-header border-0">
                <h5 class="modal-title">Property Images</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <!-- Body -->
            <div class="modal-body p-0">
                <div id="propertyImageCarousel" class="carousel slide" data-bs-ride="carousel">
                    <!-- Images -->
                    <div class="carousel-inner">
                        @for (item of mediaList; track $index) {
                        <div class="carousel-item" [class.active]="$index == 0">

                            <!-- IMAGE -->
                            @if (!item.file.endsWith('.mp4')) {
                            <img [src]="item.file" class="d-block w-100 slider-img" />
                            }

                            <!-- VIDEO -->
                            @if (item.file.endsWith('.mp4')) {
                            <video class="d-block w-100 slider-img" controls muted playsinline>
                                <source [src]="item.file" type="video/mp4" />
                            </video>
                            }

                        </div>
                        }
                    </div>

                    <!-- Controls -->
                    <button class="carousel-control-prev" type="button" data-bs-target="#propertyImageCarousel"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon"></span>
                    </button>

                    <button class="carousel-control-next" type="button" data-bs-target="#propertyImageCarousel"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon"></span>
                    </button>

                </div>
            </div>

        </div>
    </div>
</div>